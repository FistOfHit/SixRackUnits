<h1 id="october-2024">October 2024</h1>
<p><img src="https://raw.githubusercontent.com/FistOfHit/SixRackUnits/refs/heads/main/newsletters/2024/october_2024/images/1.png" alt=""></p>
<p><em>What might a human-scale CPU look like or even mean?</em></p>
<p><strong>This month&#39;s updates:</strong></p>
<ul>
<li>Huawei&#39;s Ascend 910C begins customer trials in China</li>
<li>Nvidia cancels the NVL 36x2 copper connected rack SKU</li>
<li>Nvidia moving away from SXM, starting with the rumoured &quot;B300&quot;</li>
<li>AMD announces Turin CPU, MI325X GPU, and a UEC-compliant NIC</li>
<li>Rumoured: Nvidia Vera/Rubin and Intel Falcon shores specs</li>
</ul>
<p><strong>One-pagers:</strong></p>
<ul>
<li>Instruction sets</li>
<li>Systolic arrays</li>
<li>Caches</li>
</ul>
<hr>
<h1 id="this-month-s-updates-">This month&#39;s updates:</h1>
<h2 id="huawei-s-ascend-910c">Huawei&#39;s Ascend 910C</h2>
<p><em>Amidst the turmoil of <a href="https://www.trendforce.com/news/2024/09/10/news-nvidias-blackwell-overcomes-delays-as-gb200-reportedly-sets-for-december-mass-production/">Nvidia/TSMC Blackwell manufacturing delays</a>, <a href="https://www.nortonrosefulbright.com/de-de/wissen/publications/5a936192/us-expands-export-restrictions-on-advanced-semiconductors">U.S. export controls</a>, <a href="https://www.trendforce.com/news/2024/06/28/news-huawei-faces-production-challenges-with-20-yield-rate-for-ai-chip/">SMIC&#39;s shaky 7nm process</a> and incredible competition between <a href="https://www.trendforce.com/news/2024/02/22/news-hurdles-in-acquiring-nvidias-high-end-products-assessing-the-progress-of-eight-chinese-ai-chip-manufacturers-in-self-development/">various Chinese GPU manufacturers</a>, how will Huawei&#39;s Ascend series&#39; latest device, the 910C, compete?</em></p>
<p><img src="https://raw.githubusercontent.com/FistOfHit/SixRackUnits/refs/heads/main/newsletters/2024/october_2024/images/2.png" alt=""></p>
<p><em>Source: Huawei</em></p>
<p>U.S. export controls on semiconductor technology have forced Nvidia to make numerous changes to its AI-focused GPUs aimed at the enormous Chinese market, however there are rumours that <a href="https://www.trendforce.com/news/2024/07/22/news-u-s-reportedly-enhancing-chip-export-restrictions-to-china-while-nvidias-h20-might-get-banned/">another round of even tighter restrictions</a> are about to hit. On top of this, China&#39;s own SMIC is <a href="https://www.trendforce.com/news/2024/06/28/news-huawei-faces-production-challenges-with-20-yield-rate-for-ai-chip/">struggling to reliably produce chip dies at 7nm density</a>, far behind TSMC/Intel/Samsung&#39;s technologies. <a href="https://www.trendforce.com/news/2024/02/22/news-hurdles-in-acquiring-nvidias-high-end-products-assessing-the-progress-of-eight-chinese-ai-chip-manufacturers-in-self-development/">Multiple companies are competing</a> to fill this AI training hardware vacuum in China, and <a href="https://www.trendforce.com/news/2024/02/22/news-hurdles-in-acquiring-nvidias-high-end-products-assessing-the-progress-of-eight-chinese-ai-chip-manufacturers-in-self-development/">Huawei has just begun sampling its Ascend 910C</a> chip with customers, hoping for good results.</p>
<p><img src="https://raw.githubusercontent.com/FistOfHit/SixRackUnits/refs/heads/main/newsletters/2024/october_2024/images/3.jpeg" alt=""></p>
<p><em>Source: Huawei</em></p>
<p>There isn&#39;t much information on the specs of the 910C, but looking at what we know from our sources (<a href="https://www.nextplatform.com/2024/08/13/huaweis-hisilicon-can-compete-with-nvidia-gpus-in-china/">1</a> <a href="https://www.techpolicy.press/accelerating-the-evolution-of-ai-export-controls/">2</a> <a href="https://www.tomshardware.com/tech-industry/artificial-intelligence/huawei-already-has-a-new-chip-to-rival-nvidia-ai-gpus">3</a> <a href="https://www.techinsights.com/vendor/huawei">4</a> <a href="https://link.springer.com/chapter/10.1007/978-981-19-2879-6_6">5</a>):</p>
<ul>
<li>~512 TFLOPs (FP16) compute</li>
<li>96GB memory capacity</li>
<li>PCIe Gen5 socket (64GT/s/lane)</li>
<li>Supporting CXL 2.0 (64 GB/s)</li>
<li>Supporting multiple 200/400 GbE RoCE ports (on device, no separate NIC)</li>
<li>Manufactured with the SMIC 7nm process</li>
<li>HBM bandwidth of 2.4TB/s</li>
<li>600W TDP</li>
<li>Using proprietary HCCS for inter-chip</li>
</ul>
<h2 id="nvidia-cancels-the-nvl-36x2">Nvidia cancels the NVL 36x2</h2>
<p><em>Nvidia&#39;s plans to sell the B100/200 series and their GB200 trays, as well as Quantum/Spectrum switches and their new NVLink switch all revolve around their NVL rack SKUs (<a href="https://www.nvidia.com/en-gb/data-center/gb200-nvl72/">1</a> <a href="https://www.semianalysis.com/p/nvidias-blackwell-reworked-shipment">2</a>), which have just undergone <a href="https://medium.com/@mingchikuo/nvidia-halting-development-of-gb200-nvl36-2-dual-rack-72-gpus-version-long-term-ai-and-nvidia-12b78ae2ca4f">another round of consolidation</a> after some early customer feedback and industry sentiment analysis.</em></p>
<p>Recently, <a href="https://www.semianalysis.com/p/nvidias-blackwell-reworked-shipment">Nvidia announced 3 datacentre-ready recommended architectures</a>, the NVL 36, 36x2 and 72. Of these, the NVL36 was clearly aimed at customers who are happy to sacrifice potential rack density for lower power per rack (~40kW) and the ability to use air cooling, and the NVL72 was aimed at those who wanted density at all costs, albeit incredible power draws of ~120-132kW- per rack and liquid cooling as a requirement. The NVL36x2 however, was a compromise that Nvidia has now determined was <a href="https://www.tomshardware.com/tech-industry/artificial-intelligence/nvidia-reportedly-cancels-development-of-dual-rack-72-gpu-gb200-analyst-says-the-company-intends-to-focus-on-single-rack-offerings">not going to generate sufficient demand</a>.</p>
<p><img src="https://raw.githubusercontent.com/FistOfHit/SixRackUnits/refs/heads/main/newsletters/2024/october_2024/images/4.png" alt=""></p>
<p><em>Source: SemiAnalysis</em></p>
<p>The key decision came down to one factor it seems: Energy efficiency. Both the 36 and 72-GPU racks each will have a CPU:GPU (Grace:Blackwell) ratio of 1:2 and hence the same compute trays, but crucially, the NV36x2 would need additional switching and cabling to support the NVLink copper interconnects between the GB200 compute servers on both racks, resulting a total power draw higher than a single NVL72, whilst being slightly less performant due to the increased switching and distances.</p>
<p><img src="https://raw.githubusercontent.com/FistOfHit/SixRackUnits/refs/heads/main/newsletters/2024/october_2024/images/5.png" alt=""></p>
<p>The revised schedule, likely to be updated again depending on early customer feedback in 1H2025. The x86 + Blackwell servers have not yet been announced but are likely on the way for 2H2025.</p>
<h2 id="nvidia-moving-away-from-sxm">Nvidia moving away from SXM</h2>
<p><em>The reason that NVidia&#39;s GPUs have been able to have such high TDPs and use fast NVLink and C2C connections is due to [SXM](<a href="https://en.wikipedia.org/wiki/SXM">https://en.wikipedia.org/wiki/SXM</a></em>(socket)), their proprietary socket technology for putting GPUs onto the same board as CPUs and RAM. But this has, for a while now, caused issues that NVidia is now looking to fix with <a href="https://www.trendforce.com/news/2024/10/11/news-nvidia-rumored-to-switch-to-gpu-socket-design-with-300-series-potentially-boosting-taiwanese-supply-chain/">the GB300.</a>_</p>
<p>The Server PCIe Express Module (SXM) is proprietary NVidia tech for integrating a GPU into a baseboard (motherboard, main board, PCB, etc.), where other components like CPUs, RAM, and IO chips are connected. <a href="https://en.wikipedia.org/wiki/SXM_\(socket\">SXM, when released back in ~2016</a>), solved many issues that NVidia were beginning to face and saw in their future. Using standard PCIe sockets to connect a power and memory bandwidth hungry GPU to a baseboard designed to handle components that were not as demanding, resulted in PCIe quickly becoming a problem.</p>
<p><img src="https://raw.githubusercontent.com/FistOfHit/SixRackUnits/refs/heads/main/newsletters/2024/october_2024/images/6.png" alt=""></p>
<p><em>Source: r/pcmasterrace</em></p>
<p>SXM solved this issue by integrating the GPU tighter (not as much as BGA, future discussion) into a custom baseboard, allowing for better power delivery to the device as well as enabling the use of the NVLink tech-stack to connect multiple GPUs on the same board and via NVSwitches to GPUs on other boards. Recently however, with GPUs being sold in the millions every year, the SXM sockets are causing issues for NVidia and OEMs with maintenance and after-sales support, as the tight bonding makes this difficult.</p>
<p><img src="https://raw.githubusercontent.com/FistOfHit/SixRackUnits/refs/heads/main/newsletters/2024/october_2024/images/7.jpeg" alt=""></p>
<p><em>PCI sockets</em></p>
<p><a href="https://www.tomshardware.com/tech-industry/artificial-intelligence/nvidia-reportedly-mulls-socketed-design-for-blackwell-b300-ai-gpus-next-gen-blackwell-gpus-may-be-removable-by-the-user">Rumours in the supply chain</a> are that NVidia is considering moving to an independent socket design that will keep the benefits of SXM whilst making it easier to remove and replace GPUs on baseboards as well as making maintenance simpler. For ODMs that package GPU parts into cards like the H100 and so on, and OEMs that package cards into servers, this would simplify parts of their manufacturing processes as well as making aftersales repairs and upgrades easier. It&#39;s reported that the first product that this new socketing technology will be available for is <a href="https://www.trendforce.com/news/2024/10/11/news-nvidia-rumored-to-switch-to-gpu-socket-design-with-300-series-potentially-boosting-taiwanese-supply-chain/">the GB300</a>, or what has been called the GB200 Ultra so far.</p>
<h2 id="amds-epyc-turin-mi325x-and-pollara-nic">AMDs EPYC Turin, MI325X, and Pollara NIC</h2>
<p><em>At their annual &quot;<a href="https://www.amd.com/en/corporate/events/advancing-ai.html">Advancing AI</a>&quot; event AMD announced multiple new products to maintain its dominance (CPUs) and continue its push (GPUs and NICs) into the AI hardware market. Among these, the &quot;Turin&quot; CPU, MI325X GPU and Pollara NIC are the key names.</em></p>
<p><img src="https://raw.githubusercontent.com/FistOfHit/SixRackUnits/refs/heads/main/newsletters/2024/october_2024/images/8.png" alt=""></p>
<p><em>Source: AMD</em></p>
<p>The AMD 5th gen CPU series, codenamed &quot;Turin&quot;, featuring AMDs Zen 5 architecture. <a href="https://chipsandcheese.com/p/amds-turin-5th-gen-epyc-launched">Benchmarks are in</a> and look good, but notably, Turin is not as big of an increase in performance from its predecessor as we have seen in the past. Multiple SKUs have been announced, with specs ranging from (<a href="https://www.amd.com/en/newsroom/press-releases/2024-10-10-amd-launches-5th-gen-amd-epyc-cpus-maintaining-le.html">1</a> <a href="https://www.techpowerup.com/327600/amd-epyc-turin-with-192-cores-and-384-threads-delivers-almost-40-higher-performance-than-intel-xeon-6">2</a>):</p>
<ul>
<li>8 - 192 cores (1 – 2 sockets)</li>
<li>Up to 1.5TB of DDR5 RAM</li>
<li>Up to ~614 GB/s bandwidth</li>
<li>$527 - $14,813 per unit</li>
<li>64 – 512 MB L3 cache</li>
<li>Up to 5.0 GHz boost</li>
</ul>
<p><img src="https://raw.githubusercontent.com/FistOfHit/SixRackUnits/refs/heads/main/newsletters/2024/october_2024/images/9.png" alt=""></p>
<p><em>Source: AMD</em></p>
<p>MI325X is a rather simple upgrade from the now famous MI300X, with all the specs being the same except for having more (and slightly better) HBM memory (192GB HBM3 -&gt; 256GB HBM3e). As <a href="https://www.trendforce.com/presscenter/news/20240416-12119.html">this competes with the Nvidia H200</a>, it&#39;s understandable why AMD left the chip as it was and just added memory capacity (<a href="https://www.amd.com/en/products/accelerators/instinct/mi300/mi325x.html">1</a> <a href="https://www.amd.com/en/products/accelerators/instinct/mi300/mi300x.html">2</a>):</p>
<ul>
<li>256GB HBM3e (from 192GB HBM3)</li>
<li>6TB/s memory bandwidth (from 5.3TB/s)</li>
<li>1000W TDP (from 750W TDP)</li>
<li>1.3/2.6 PFLOPs FP16/FP8</li>
<li>128GB/s infinity fabric bandwidth (GPU-GPU + CPU-GPU)</li>
<li>~1.3x performance of H200 claimed</li>
</ul>
<p><img src="https://raw.githubusercontent.com/FistOfHit/SixRackUnits/refs/heads/main/newsletters/2024/october_2024/images/10.png" alt=""></p>
<p><em>Source: AMD</em></p>
<p>The Pensando series network interface card (NIC), codenamed &quot;Pollara&quot;, is the world&#39;s first NIC to support <a href="https://ultraethernet.org/">Ultra Ethernet</a>, the new technology to consolidate RoCE and other optimisations and challenge (and open source) Inifiniband. Competing with the Nvidia (Mellanox) ConnectX-7, Pollara supports up to 1 x 400GbE (<a href="https://www.amd.com/content/dam/amd/en/documents/pensando-technical-docs/product-briefs/pensando-pollara-400-product-brief.pdf">1</a>):</p>
<ul>
<li>4 x 100G / 2 x 200G / 1 x 400G support with QSFP112</li>
<li>Supports UEC optimisations and RoCEv2 compatible</li>
<li>PCIe Gen 5 x16 NIC-Host</li>
</ul>
<h2 id="-rumours-nvidia-vera-rubin-and-intel-falcon-shores-specs">(Rumours) Nvidia Vera/Rubin and Intel Falcon shores specs</h2>
<p><em>As we move towards 1Q2025, more and more leaks, reveals, and news finds its way into the public about next-next gen products (one after the next, announced, latest generation). Here we summarise what we know about the dates and specs of these products.</em></p>
<p><img src="https://raw.githubusercontent.com/FistOfHit/SixRackUnits/refs/heads/main/newsletters/2024/october_2024/images/11.png" alt=""></p>
<p><em>Source: Nvidia</em></p>
<p>NVLink gen6 switch:</p>
<ul>
<li>3.6TB Agg. bi-directional bandwidth</li>
</ul>
<p>CX9 SuperNIC:</p>
<ul>
<li>1.6TB/s single port bandwidth</li>
</ul>
<p>X1600 switch (Ethernet AND InfiniBand):</p>
<ul>
<li>1.6TB OSFP ports at a VERY high radix (512 likely)</li>
</ul>
<p>Rubin GPU:</p>
<ul>
<li>TDP competitive (1200W-1500W SXM/custom socket, 500W PCIe)</li>
<li>Using HBM4 8hi (1.6 TB/s per 48GB capacity device)</li>
</ul>
<p>Vera CPU (ARM):</p>
<ul>
<li>Likely C2C scales with NVLink (900GB/s bandwidth CPU-CPU/GPU)</li>
</ul>
<p><img src="https://raw.githubusercontent.com/FistOfHit/SixRackUnits/refs/heads/main/newsletters/2024/october_2024/images/12.png" alt=""></p>
<p><em>Source: Intel</em></p>
<p>Falcon shores CPU-GPU SoC:</p>
<ul>
<li>TDP 1500W confirmed</li>
<li>Mixture of x86 CPU and Xe GPU</li>
<li>288GB HBM3, 9.8TB/s bandwidth</li>
<li>Using TSMC 3nm CoWoS-R <strong>not intel</strong></li>
<li>Customisable CPU/GPU ratios</li>
<li>Absorbing Gaudi and Max series, maintaining backwards compatibility</li>
</ul>
<p>Clearwater forest Xeon CPU:</p>
<ul>
<li>Intel 18A process node</li>
<li>300 Billion transistors confirmed</li>
<li>Likely CXL 3.1 and UCIe 1.0/2.0 compatible</li>
<li>PCIe 6.0 ready</li>
</ul>
<hr>
<h1 id="one-pagers-">One-pagers:</h1>
<h2 id="instruction-sets">Instruction sets</h2>
<p><em>How does a CPU understand and carry out the calculations needed to run complex applications and workloads like AI or MS word? All these abstract and complex programs are broken down and compiled into lots of (relatively) simple, easy to understand instructions that the CPU can understand, called an instruction set.</em></p>
<p><img src="https://raw.githubusercontent.com/FistOfHit/SixRackUnits/refs/heads/main/newsletters/2024/october_2024/images/13.png" alt=""></p>
<p><em>The two ISAs that run the world</em></p>
<p>The instruction set architecture (ISA) is a description of how to make use of a piece of complicated hardware like a CPU, at a very simple and straightforward level. In the diagram, 4 such instructions that almost all CPUs would understand are shown. These instructions describe what to do to data that is kept in certain parts of memory, R (registers), and where to put the result. For the ADD example, it&#39;s clear that the instruction states that the hardware should collect the numbers in R[s] and R[t], add them together, and put them in R[d].</p>
<p>Of all the ISAs ever made for all the various hardware that exists out there, the two most popular for CPUs are x86 and ARM, both designed for general purpose compute and increasingly tuned over the years for higher and higher performance and efficiency.</p>
<p><img src="https://raw.githubusercontent.com/FistOfHit/SixRackUnits/refs/heads/main/newsletters/2024/october_2024/images/14.png" alt=""></p>
<p><em>An example of an instruction set</em></p>
<p>While x86 started on and continued down the path of being a complex instruction set computer (CISC), ARM was created to be a simpler, or &quot;reduced&quot; instruction set computer (RISC). Naturally, individual CISC instructions can perform a greater variety of more complicated transforms on source data, but also require more expensive and power-hungry hardware. In comparison, simpler individual instructions result in less complexity per individual instruction, requiring multiple simple instructions to do what one more complex instruction could do, but also require less expensive/complicated hardware and are generally more energy efficient.</p>
<h2 id="systolic-arrays">Systolic arrays</h2>
<p><em>The core computation that all current AI models are implemented as, the computation that our high-performing hardware has specialised to, for as long as we have been using compute for scientific purposes, is the matrix (array) multiplication. The most natural architecture to perform this is the systolic array.</em></p>
<p>The computations required to run almost all AI models are matrix multiplications (matmuls) - matrices just being a 2D array of numbers, and multiplying them being an operation between two matrices, A and B, to accumulate their information into a new third matrix, C, as shown in the diagram. When you can represent both the input data and the parameters of your AI model as matrices, it&#39;s clear why the matmul operation is key to enabling information propagation.</p>
<p><img src="https://raw.githubusercontent.com/FistOfHit/SixRackUnits/refs/heads/main/newsletters/2024/october_2024/images/15.png" alt=""></p>
<p><em>A simple A x B = C operation visualised</em></p>
<p>The systolic array is an architecture that acts as a heart-like structure (hence the name &quot;systolic&quot;) for continually taking in data and accumulating it (performing a matmul) and then outputting it as soon as the streaming is done. The diagram shows a logical representation of one, with each processing element (PE) accumulating the multiple of each data point coming in from the left and the top and passing the original data onwards to the left and bottom.</p>
<p><img src="https://raw.githubusercontent.com/FistOfHit/SixRackUnits/refs/heads/main/newsletters/2024/october_2024/images/16.png" alt=""></p>
<p><em>A topological diagram of a systolic array</em></p>
<p>Google&#39;s TPU series are the most widely used example of an architecture built around a systolic array, with the TPUv4 containing 2 &quot;tensor&quot; (another term for matrix) cores, each with 4 units capable of performing 128x128 (~16K) multiplications and additions at once. It&#39;s also rumoured that Nvidia&#39;s tensor cores in their AI GPUs, the details of which are kept even more secret, are also systolic arrays. It should be noted that due to the high throughput of systolic array architectures, HBM on device and sufficient SRAM with multiple well-managed levels of cache are needed to keep them saturated, which is indeed common in TPUs and GPUs.</p>
<h2 id="caches">Caches</h2>
<p><em>How does a CPU understand and carry out the calculations needed to run complex applications and workloads like AI or MS word? All these abstract and complex programs are broken down and compiled into lots of (relatively) simple, easy to understand instructions that the CPU can understand, called an instruction set.</em></p>
<p><img src="https://raw.githubusercontent.com/FistOfHit/SixRackUnits/refs/heads/main/newsletters/2024/october_2024/images/17.png" alt=""></p>
<p><em>Pointing out caches on a physical chip</em></p>
<p>Compute components like CPUs and GPUs contain relatively small amounts of very well managed memory on device, known generally as caches. Since data used to compute is often re-used repeatedly, keeping recently used data close to compute (in caches) can reduce workload runtimes by many orders of magnitude. Caches are organised into levels, as shown in the diagrams, ranging from L1 (closest to the actual compute logic) to L3/4/5 (furthest from the compute, closer to RAM/Storage), and each level gets larger but also gets slower, as its physically further from where the data stored is actually used. Despite their small size and relative obscurity, the design, sizing, and management of these caches can have a significant impact on the performance of the device.</p>
<p><img src="https://raw.githubusercontent.com/FistOfHit/SixRackUnits/refs/heads/main/newsletters/2024/october_2024/images/18.png" alt=""></p>
<p><em>The cache hierarchy as seen in almost all servers</em></p>
<p>&quot;Compute is cheap, bandwidth is expensive, and latency is bound by physics&quot; – For most modern hardware, all three of these statements mostly hold true (with certain caveats and exceptions). HPC and AI workloads, therefore, must be optimised to best use the memory system of the hardware they run on, and so far, we&#39;ve done this very well. Specialised libraries for scientific/high-performance computing and even the coding languages themselves have been optimised to within fractions of a percent of theoretical optimal performance over the past few decades, and with new workloads, new software and new hardware being developed continuously, the drive to optimise our compute to better suit our memory systems continues.</p>
